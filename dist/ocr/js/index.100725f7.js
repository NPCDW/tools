(function(e){function t(t){for(var n,o,c=t[0],s=t[1],l=t[2],f=0,d=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={index:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("8bbf"),r=a.n(n),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{color:"white","background-color":"#F56C6C","text-align":"center","font-size":"12px",padding:"5px 0 5px 0",position:"absolute",top:"0",width:"100%"}},[e._v("当前模式下，服务由【百度云】提供")]),a("ocr"),a("a",{staticClass:"github-corner",attrs:{href:"https://github.com/NPCDW/ocr","aria-label":"View source on GitHub"}},[a("svg",{staticStyle:{fill:"#151513",color:"#fff",position:"absolute",top:"0",border:"0",right:"0"},attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[a("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),a("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),a("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])],1)},o=[],c=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticStyle:{margin:"40px",display:"flex"}},[n("div",{staticStyle:{margin:"40px"}},[n("div",{staticStyle:{"max-width":"500px"}},[n("input",{staticStyle:{width:"438px",margin:"20px",padding:"10px"},attrs:{type:"text",placeholder:"粘贴图片到此处",autofocus:""},on:{paste:function(e){return t.handleImagePaste(e)}}}),n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("div",{staticStyle:{position:"relative"}},[t.srcImageUrl?n("div",[n("img",{staticStyle:{"max-width":"460px","max-height":"260px"},attrs:{src:t.srcImageUrl,alt:t.srcImageName,srcset:""}})]):n("div",{staticStyle:{border:"#DDDDDD 3px dashed",height:"200px",width:"260px"}},[t._m(0)]),n("input",{staticStyle:{opacity:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.handleImageUpload(e)}}})])])]),n("el-button",{staticStyle:{margin:"20px",width:"460px"},attrs:{loading:t.loading,type:"primary"},on:{click:t.textRecognition}},[t._v("文本识别")]),n("div",{staticStyle:{margin:"20px",width:"460px"}},[n("el-tabs",{on:{"tab-click":t.handleTabSwitch},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"百度云",name:"baidu"}},[n("baidu-ocr",{ref:"baidu-ocr",attrs:{"image-canvas":t.srcImageCanvas},on:{"update:imageCanvas":function(e){t.srcImageCanvas=e},"update:image-canvas":function(e){t.srcImageCanvas=e},"fill-ocr-result":function(t){e.ocrResult=t}}})],1),n("el-tab-pane",{attrs:{label:"腾讯云",name:"tencent"}},[n("tencent-ocr")],1)],1)],1)],1),n("div",{staticStyle:{margin:"40px",flex:"1"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:30},placeholder:"识别结果...",readonly:!0},model:{value:t.ocrResult,callback:function(e){t.ocrResult=e},expression:"ocrResult"}})],1)])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center",height:"100%",width:"100%",display:"flex","flex-direction":"column","justify-content":"center"}},[a("span",{staticStyle:{"font-size":"40px",color:"#DDDDDD"}},[e._v("+")]),a("span",{staticStyle:{"font-size":"14px","text-align":"center",color:"#AAAAAA"}},[e._v("拖拽图片到此处，或点击此处上传")])])}],l=(a("d3b7"),a("b0c0"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{model:e.form,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"识别类型"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:"general_basic"}},[e._v("标准")]),a("el-radio",{attrs:{label:"accurate_basic"}},[e._v("高精度")])],1)],1),a("el-form-item",{attrs:{label:"access_token"}},[a("el-input",{attrs:{type:"password","show-password":"",placeholder:"选填，与下方两个输入框二选一"},model:{value:e.form.access_token,callback:function(t){e.$set(e.form,"access_token",t)},expression:"form.access_token"}})],1),a("el-form-item",{attrs:{label:"保存账户信息（在当前浏览器）","label-width":"280px"}},[a("el-switch",{on:{change:function(t){return e.saveChange()}},model:{value:e.form.save,callback:function(t){e.$set(e.form,"save",t)},expression:"form.save"}})],1)],1)],1)}),u=[],f=a("1da1"),d=(a("96cf"),a("cebe")),m=a.n(d);function p(e,t){return m.a.get("https://aip.baidubce.com/oauth/2.0/token",{params:{client_id:e,client_secret:t,grant_type:"client_credentials"}})}function h(e,t,a){return m.a.post("https://aip.baidubce.com/rest/2.0/ocr/v1/"+t,"image="+encodeURIComponent(a),{params:{access_token:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}})}var g={name:"BaiduOcr",data:function(){return{form:{type:"general_basic",access_token:"",client_id:"",client_secret:"",save:!1}}},created:function(){var e=localStorage.getItem("ocr-baidu-info-save");"true"===e&&(this.form.save=!0,this.form.access_token=localStorage.getItem("ocr-baidu-access_token"),this.form.client_id=localStorage.getItem("ocr-baidu-client_id"),this.form.client_secret=localStorage.getItem("ocr-baidu-client_secret"))},methods:{ocr:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.form.access_token){a.next=6;break}if(t.form.client_id&&t.form.client_secret){a.next=4;break}return t.$message.error("请填写access_token，或APIKey和SecretKey"),a.abrupt("return");case 4:return a.next=6,p(t.form.client_id,t.form.client_secret).then((function(e){var a=e.data;t.form.access_token=a.access_token}));case 6:n=t.form.access_token.substring(0,t.form.access_token.lastIndexOf(".")),n=n.substr(n.lastIndexOf(".")+1),r=Date.parse(new Date)/1e3,r+"">n?t.$message.error("access_token已过期，请更换"):parseInt(n)-r<432e3&&t.$message.warning("access_token即将过期，请及时更换"),h(t.form.access_token,t.form.type,e.toDataURL("image/jpeg",1)).then((function(e){for(var a=e.data,n="",r=0;r<a.words_result.length;r++)n+=a.words_result[r].words+"\n";t.$emit("fill-ocr-result",n)})).catch((function(e){t.$message.error(e)}));case 11:case"end":return a.stop()}}),a)})))()},saveChange:function(){this.form.save?(localStorage.setItem("ocr-baidu-info-save","true"),localStorage.setItem("ocr-baidu-access_token",this.form.access_token),localStorage.setItem("ocr-baidu-client_id",this.form.client_id),localStorage.setItem("ocr-baidu-client_secret",this.form.client_secret)):(localStorage.setItem("ocr-baidu-info-save","false"),localStorage.removeItem("ocr-baidu-access_token"),localStorage.removeItem("ocr-baidu-client_id"),localStorage.removeItem("ocr-baidu-client_secret"))}},watch:{"form.access_token":function(){this.saveChange(this.save)},"form.client_id":function(){this.saveChange(this.save)},"form.client_secret":function(){this.saveChange(this.save)}}},v=g,b=a("2877"),x=Object(b["a"])(v,l,u,!1,null,"12d6a526",null),_=x.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" 腾讯Ocr ")])},y=[],C={name:"TencentOcr"},I=C,k=Object(b["a"])(I,w,y,!1,null,"86f1df5e",null),S=k.exports,O={name:"Ocr",components:{TencentOcr:S,BaiduOcr:_},data:function(){return{srcImageFile:null,srcImageUrl:null,srcImageName:null,srcImageCanvas:null,activeName:"baidu",ocrResult:"",loading:!1}},methods:{textRecognition:function(){var e=this;this.srcImageUrl?(this.loading=!0,this.$nextTick((function(){"baidu"===e.activeName?e.$refs["baidu-ocr"].ocr(e.srcImageCanvas).finally((function(){e.loading=!1})):e.activeName}))):this.$message.error("请先选择图片")},handleTabSwitch:function(){},handleImagePaste:function(e){if(e.clipboardData||e.originalEvent){var t=e.clipboardData||e.originalEvent.clipboardData;if(t.items)for(var a=t.items,n=a.length,r=null,i=0;i<n;i++)-1!==a[i].type.indexOf("image")&&(r=a[i].getAsFile(),this.handleImage(r))}},handleImageUpload:function(e){e.target.files[0]&&this.handleImage(e.target.files[0])},handleImage:function(e){var t=this;this.srcImageFile=e,this.srcImageUrl=this.getFileUrl(this.srcImageFile),this.srcImageName=this.srcImageFile.name,this.getCanvas(this.srcImageUrl).then((function(e){t.srcImageCanvas=e,t.textRecognition()}))},getFileUrl:function(e){var t=null;return void 0!==window.URL?t=window.URL.createObjectURL(e):void 0!==window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},getCanvas:function(e){return new Promise((function(t){var a=new Image;a.src=e,a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var n=e.getContext("2d");n.fillStyle="white",n.fillRect(0,0,e.width,e.height),n.drawImage(a,0,0,a.width,a.height),t(e)}}))}}},R=O,j=Object(b["a"])(R,c,s,!1,null,"3113e51e",null),D=j.exports,U={name:"App",components:{Ocr:D}},$=U,L=(a("034f"),Object(b["a"])($,i,o,!1,null,null,null)),P=L.exports,E=a("5f72"),N=a.n(E);a("0fae");r.a.config.productionTip=!1,r.a.use(N.a),new r.a({render:function(e){return e(P)}}).$mount("#app")},"5f72":function(e,t){e.exports=ELEMENT},"85ec":function(e,t,a){},"8bbf":function(e,t){e.exports=Vue},cebe:function(e,t){e.exports=axios}});